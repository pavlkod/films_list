(this.webpackJsonpfilms_list=this.webpackJsonpfilms_list||[]).push([[0],{17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),i=a.n(n),s=a(8),r=a.n(s),l=a(7),o=a.n(l),d=a(9),j=a(2),b=function(e){var t=e.data,a=t.movie,i=t.moviesWillWatch,s=e.removeItem,r=e.addMovieToWillWatch,l=e.removieMovieFromWillWatch,o=Object(n.useState)(!1),d=Object(j.a)(o,2),b=d[0],m=d[1];return Object(c.jsxs)("div",{className:"card",children:[a.backdrop_path&&a.poster_path&&Object(c.jsx)("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500".concat(a.backdrop_path||a.poster_path),alt:""}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h6",{className:"card-title",children:a.title}),Object(c.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[Object(c.jsxs)("p",{className:"mb-0",children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",a.vote_average]}),b||i.find((function(e){return e.id===a.id}))?Object(c.jsx)("button",{type:"button",className:"btn btn-warning",onClick:function(){m(!1),l.bind(null,a)()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430"}):Object(c.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(){m(!0),r.bind(null,a)()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0443"})]}),Object(c.jsx)("button",{className:"btn btn-danger",onClick:s.bind(null,a),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c"})]})]})},m=function(e){var t=e.data,a=t.movies,n=t.moviesWillWatch,i=e.removeItem,s=e.addMovieToWillWatch,r=e.removieMovieFromWillWatch;return Object(c.jsx)(c.Fragment,{children:a.map((function(e){return Object(c.jsx)("div",{className:"col-6 mb-4",children:Object(c.jsx)(b,{data:{movie:e,moviesWillWatch:n},removeItem:i,addMovieToWillWatch:s,removieMovieFromWillWatch:r})},e.id)}))})},u=(a(17),function(e){var t=e.data;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("p",{children:["\u041a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0443: ",t.length]}),t.length>0&&Object(c.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(c.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.title,Object(c.jsx)("span",{children:e.vote_average})]},e.id)}))})]})}),h=a(4),v=a.n(h),p=function(e){var t=e.sort_by,a=e.changeSort;return Object(c.jsx)("ul",{className:"tabs nav nav-pills",children:[{name:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u044c",sort:"popularity.desc"},{name:"\u0414\u043e\u0445\u043e\u0434",sort:"revenue.desc"},{name:"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430",sort:"vote_average.desc"}].map((function(e,n){return Object(c.jsx)("li",{className:"nav-item",onClick:a.bind(null,e.sort),children:Object(c.jsx)("div",{className:v()("nav-link",{active:t===e.sort}),children:e.name})},n)}))})},O=(a(18),function(e){var t=e.data,a=t.page,n=t.totalPages,i=e.changePage,s=a-1,r=a+1;return Object(c.jsx)("nav",{"aria-label":"Page navigation example",children:Object(c.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(c.jsx)("li",{className:v()("page-item","page-item--hover",{disabled:a<=1}),onClick:i.bind(null,s,n),"data-page":s,children:Object(c.jsx)("span",{className:"page-link",tabIndex:"-1",children:"\u041d\u0430\u0437\u0430\u0434"})}),Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"page-link",children:a})}),Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"page-link",children:n})}),Object(c.jsx)("li",{className:v()("page-item","page-item--hover",{disabled:a>=n}),onClick:i.bind(null,r,n),"data-page":r,children:Object(c.jsx)("span",{className:"page-link",children:"\u0412\u043f\u0435\u0440\u0435\u0434"})})]})})}),g=a(10);var x=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],i=t[1],s=Object(n.useState)(1),r=Object(j.a)(s,2),l=r[0],b=r[1],h=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],c=t[1];return{moviesWillWatch:a,setMoviesWillWatch:c,removieMovieFromWillWatch:function(e){var t=a.filter((function(t){return t.id!==e.id}));c(t)},addMovieToWillWatch:function(e){return c([].concat(Object(g.a)(a),[e]))}}}(),v=h.moviesWillWatch,x=h.addMovieToWillWatch,f=h.removieMovieFromWillWatch,W=function(){var e=Object(n.useState)(1),t=Object(j.a)(e,2),a=t[0],c=t[1];return{page:a,changePage:function(e,t){!e||e>t||c(e)}}}(),N=W.page,k=W.changePage,y=function(){var e=Object(n.useState)("popularity.desc"),t=Object(j.a)(e,2),a=t[0],c=t[1];return{sortBy:a,changeSort:function(e){return c(e)}}}(),M=y.sortBy,_=y.changeSort;return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t,a,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://api.themoviedb.org/3","/discover/movie?api_key=").concat("3f4ca4f3a9750da53450646ced312397","&sort_by=").concat(M,"&language=ru-RU&page=").concat(N));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c=a.results,n=a.total_pages,i(c),b(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[M,N]),Object(c.jsx)("div",{className:"App container mt-5",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-9",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-12 mb-4",children:Object(c.jsx)(p,{sort_by:M,changeSort:_})})}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(m,{data:{movies:a,moviesWillWatch:v},removeItem:function(e){var t=a.filter((function(t){return t.id!==e.id}));i(t),f(e)},addMovieToWillWatch:x,removieMovieFromWillWatch:f}),l>1&&Object(c.jsx)(O,{data:{page:N,totalPages:l},changePage:k})]})]}),Object(c.jsx)("div",{className:"col-3",children:Object(c.jsx)("div",{className:"sticky-block",children:Object(c.jsx)(u,{data:v})})})]})})};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.69f51e8b.chunk.js.map