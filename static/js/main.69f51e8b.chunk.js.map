{"version":3,"sources":["components/MovieItem/index.js","components/MovieList/index.js","components/MovieListWillWatch/index.js","components/MovieTabs/index.js","components/MoviePagination/index.js","App.js","hooks/useMoviesWillWatch.js","hooks/usePagination.js","hooks/useChangeSort.js","utils/app.js","index.js"],"names":["MovieItem","data","movie","moviesWillWatch","removeItem","addMovieToWillWatch","removieMovieFromWillWatch","useState","willWatches","setWillWatches","className","backdrop_path","poster_path","src","alt","title","vote_average","find","item","id","type","onClick","bind","MovieList","movies","map","MovieListWillWatch","length","MovieTabs","sort_by","changeSort","name","sort","index","classnames","active","MoviePagination","page","totalPages","changePage","prevPage","nextPage","aria-label","disabled","data-page","tabIndex","App","setMovies","setTotalPages","setMoviesWillWatch","filterMovies","filter","useMoviesWillWatch","setPage","totalPage","usePagination","sortBy","setSortBy","value","useChangeSort","useEffect","a","fetch","response","json","results","total_pages","console","error","getMovies","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.69f51e8b.chunk.js","sourcesContent":["import { useState } from \"react\";\r\n\r\nconst MovieItem = ({\r\n  data: { movie, moviesWillWatch },\r\n  removeItem,\r\n  addMovieToWillWatch,\r\n  removieMovieFromWillWatch,\r\n}) => {\r\n  const [willWatches, setWillWatches] = useState(false);\r\n  return (\r\n    <div className=\"card\">\r\n      {movie.backdrop_path && movie.poster_path && (\r\n        <img\r\n          className=\"card-img-top\"\r\n          src={`https://image.tmdb.org/t/p/w500${movie.backdrop_path || movie.poster_path}`}\r\n          alt=\"\"\r\n        />\r\n      )}\r\n      <div className=\"card-body\">\r\n        <h6 className=\"card-title\">{movie.title}</h6>\r\n        <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n          <p className=\"mb-0\">Рейтинг: {movie.vote_average}</p>\r\n          {willWatches || moviesWillWatch.find(item => item.id === movie.id) ? (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-warning\"\r\n              onClick={() => {\r\n                setWillWatches(false);\r\n                removieMovieFromWillWatch.bind(null, movie)();\r\n              }}\r\n            >\r\n              Удалить из просмотра\r\n            </button>\r\n          ) : (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-success\"\r\n              onClick={() => {\r\n                setWillWatches(true);\r\n                addMovieToWillWatch.bind(null, movie)();\r\n              }}\r\n            >\r\n              Добавить к просмотру\r\n            </button>\r\n          )}\r\n        </div>\r\n        <button className=\"btn btn-danger\" onClick={removeItem.bind(null, movie)}>\r\n          Удалить фильм\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { MovieItem };\r\n","import { MovieItem } from \"../MovieItem\";\r\n\r\nconst MovieList = ({\r\n  data: { movies, moviesWillWatch },\r\n  removeItem,\r\n  addMovieToWillWatch,\r\n  removieMovieFromWillWatch,\r\n}) => {\r\n  return (\r\n    <>\r\n      {movies.map(movie => (\r\n        <div className=\"col-6 mb-4\" key={movie.id}>\r\n          <MovieItem\r\n            data={{ movie, moviesWillWatch }}\r\n            removeItem={removeItem}\r\n            addMovieToWillWatch={addMovieToWillWatch}\r\n            removieMovieFromWillWatch={removieMovieFromWillWatch}\r\n          />\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport { MovieList };\r\n","import \"./index.scss\";\r\nconst MovieListWillWatch = ({ data }) => {\r\n  return (\r\n    <>\r\n      <p>К просмотру: {data.length}</p>\r\n      {data.length > 0 && (\r\n        <ul className=\"list-group\">\r\n          {data.map(item => (\r\n            <li className=\"list-group-item d-flex justify-content-between align-items-center\" key={item.id}>\r\n              {item.title}\r\n              <span>{item.vote_average}</span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport { MovieListWillWatch };\r\n","import classnames from \"classnames\";\r\n\r\nconst MovieTabs = ({ sort_by, changeSort }) => {\r\n  const tabs = [\r\n    {\r\n      name: \"Популярность\",\r\n      sort: \"popularity.desc\",\r\n    },\r\n    {\r\n      name: \"Доход\",\r\n      sort: \"revenue.desc\",\r\n    },\r\n    {\r\n      name: \"Средняя оценка\",\r\n      sort: \"vote_average.desc\",\r\n    },\r\n  ];\r\n  return (\r\n    <ul className=\"tabs nav nav-pills\">\r\n      {tabs.map((item, index) => {\r\n        return (\r\n          <li className=\"nav-item\" onClick={changeSort.bind(null, item.sort)} key={index}>\r\n            <div className={classnames(\"nav-link\", { active: sort_by === item.sort })}>{item.name}</div>\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport { MovieTabs };\r\n","import classnames from \"classnames\";\r\nimport \"./index.scss\";\r\n\r\nconst MoviePagination = ({ data: { page, totalPages }, changePage }) => {\r\n  const prevPage = page - 1;\r\n  const nextPage = page + 1;\r\n  return (\r\n    <nav aria-label=\"Page navigation example\">\r\n      <ul className=\"pagination justify-content-center\">\r\n        <li\r\n          className={classnames(\"page-item\", \"page-item--hover\", { disabled: page <= 1 })}\r\n          onClick={changePage.bind(null, prevPage, totalPages)}\r\n          data-page={prevPage}\r\n        >\r\n          <span className=\"page-link\" tabIndex=\"-1\">\r\n            Назад\r\n          </span>\r\n        </li>\r\n        <li className=\"page-item\">\r\n          <span className=\"page-link\">{page}</span>\r\n        </li>\r\n        <li className=\"page-item\">\r\n          <span className=\"page-link\">{totalPages}</span>\r\n        </li>\r\n        <li\r\n          className={classnames(\"page-item\", \"page-item--hover\", { disabled: page >= totalPages })}\r\n          onClick={changePage.bind(null, nextPage, totalPages)}\r\n          data-page={nextPage}\r\n        >\r\n          <span className=\"page-link\">Вперед</span>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\nexport { MoviePagination };\r\n","import { useEffect, useState } from \"react\";\n\nimport { MovieList } from \"./components/MovieList\";\nimport { MovieListWillWatch } from \"./components/MovieListWillWatch\";\nimport { MovieTabs } from \"./components/MovieTabs\";\nimport { MoviePagination } from \"./components/MoviePagination\";\n\nimport { useMoviesWillWatch } from \"./hooks/useMoviesWillWatch\";\nimport { usePagination } from \"./hooks/usePagination\";\n\nimport { API_KEY_3, API_URL } from \"./utils/app\";\nimport { useChangeSort } from \"./hooks/useChangeSort\";\n\nfunction App() {\n  const [movies, setMovies] = useState([]);\n  const [totalPages, setTotalPages] = useState(1);\n\n  const { moviesWillWatch, addMovieToWillWatch, removieMovieFromWillWatch } = useMoviesWillWatch();\n  const { page, changePage } = usePagination();\n  const { sortBy, changeSort } = useChangeSort();\n\n  useEffect(() => {\n    const getMovies = async () => {\n      try {\n        const response = await fetch(\n          `${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${sortBy}&language=ru-RU&page=${page}`\n        );\n        const { results, total_pages } = await response.json();\n\n        setMovies(results);\n        setTotalPages(total_pages);\n      } catch (e) {\n        console.error(e);\n      }\n    };\n    getMovies();\n  }, [sortBy, page]);\n\n  const removeItem = data => {\n    const filterMovies = movies.filter(movie => movie.id !== data.id);\n    setMovies(filterMovies);\n\n    removieMovieFromWillWatch(data);\n  };\n\n  return (\n    <div className=\"App container mt-5\">\n      <div className=\"row\">\n        <div className=\"col-9\">\n          <div className=\"row\">\n            <div className=\"col-12 mb-4\">\n              <MovieTabs sort_by={sortBy} changeSort={changeSort} />\n            </div>\n          </div>\n          <div className=\"row\">\n            <MovieList\n              data={{ movies, moviesWillWatch }}\n              removeItem={removeItem}\n              addMovieToWillWatch={addMovieToWillWatch}\n              removieMovieFromWillWatch={removieMovieFromWillWatch}\n            />\n            {totalPages > 1 && <MoviePagination data={{ page, totalPages }} changePage={changePage} />}\n          </div>\n        </div>\n        <div className=\"col-3\">\n          <div className=\"sticky-block\">\n            <MovieListWillWatch data={moviesWillWatch} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { useState } from \"react\";\r\n\r\nconst useMoviesWillWatch = () => {\r\n  const [moviesWillWatch, setMoviesWillWatch] = useState([]);\r\n  const removieMovieFromWillWatch = data => {\r\n    const filterMovies = moviesWillWatch.filter(movie => movie.id !== data.id);\r\n    setMoviesWillWatch(filterMovies);\r\n  };\r\n\r\n  const addMovieToWillWatch = movie => setMoviesWillWatch([...moviesWillWatch, movie]);\r\n\r\n  return {\r\n    moviesWillWatch,\r\n    setMoviesWillWatch,\r\n    removieMovieFromWillWatch,\r\n    addMovieToWillWatch,\r\n  };\r\n};\r\nexport { useMoviesWillWatch };\r\n","import { useState } from \"react\";\r\n\r\nconst usePagination = () => {\r\n  const [page, setPage] = useState(1);\r\n\r\n  const changePage = (page, totalPage) => {\r\n    if (!page || page > totalPage) {\r\n      return;\r\n    }\r\n    setPage(page);\r\n  };\r\n\r\n  return { page, changePage };\r\n};\r\nexport { usePagination };\r\n","import { useState } from \"react\";\r\n\r\nconst useChangeSort = () => {\r\n  const [sortBy, setSortBy] = useState(\"popularity.desc\");\r\n\r\n  const changeSort = value => setSortBy(value);\r\n\r\n  return { sortBy, changeSort };\r\n};\r\nexport { useChangeSort };\r\n","export const API_URL = \"https://api.themoviedb.org/3\";\r\n\r\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\r\n\r\nexport const API_KEY_4 =\r\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}